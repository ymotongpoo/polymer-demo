<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-styles/paper-styles.html">
<link rel="stylesheet" href="../elements/app-theme.html">
<dom-module id="input-demo">
  <style>
   :host {
     width: 100%;
     height: 100%;
     --paper-input-container-focus-color: var(--light-primary-color);
   }

   #result {
     margin: 8px;
     padding: 4px;
     width: 100%;
     border: 1px solid var(--divider-color);
     color: var(--primary-text-color);
   }

   #result[isvalid="false"] {
     color: var(--paper-red-500);
   }

   paper-input {
     margin: 8px;
   }
  </style>
  
  <template>
    <p id="result">type of 'foo' is: <span>[[type_of_foo]]</span></p>
    <paper-input label="foo"
                 auto-validate
                 pattern="[0-9\.]*"
                 error-message="only digits and period"
                 value={{foo}}></paper-input>
  </template>
  
  <script>
   Polymer({
     is: 'input-demo',

     listeners: {
       'foo-changed': '_fooChanged'
     },

     properties: {
       foo: {
         type: Number,
         notify: true,
         value: function() {
           return 0;
         }
       },
       type_of_foo: {
         type: String,
         value: function() {
           return typeof this.foo;
         }
       }
     },

     ready: function() {
       this.foo = 0;
       this.$.result.setAttribute('isvalid', true);
     },

     _fooChanged: function() {
       this.type_of_foo = typeof this.foo;
       console.log(this.$.result.getAttribute('isvalid'));
       if (this.type_of_foo !== Number || this.type_of_foo !== "number") {
         this.$.result.setAttribute('isvalid', false);
       } else {
         this.$.result.setAttribute('isvalid', true);
       }
     }
   });
  </script>
</dom-module>
